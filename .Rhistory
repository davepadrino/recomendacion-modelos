library("arules")
library("dplyr")
library("arulesViz")
```
Se procede a la lectura de los archivos a utilizar para realizar el analisis exploratorio
```{r}
periodico <- read.csv("periodico.csv")
ejemplo <- read.csv("ejemplo.csv")
```
Para comenzar con el anÃƒÂ¡lisis exploratorio se solicita el nombre de sus columnas para asi determinar si hay alguna que no sirva para el anÃƒÂ¡lisis.
```{r}
names(ejemplo)
names(periodico)
colnames(periodico)[5] <-  "items"
head(ejemplo$X)
```
De primera pasada todas las columnas parecen tener sentido excepto una, 'X', al observar su contenido, parecen Ãƒ­ndices que no tienen mucha utilidad en las actividades. Proceden a eliminarse.
```{r}
ejemplo$X <- NULL
periodico$X <- NULL
```
### Transacciones bot
```{r}
example.bots <- as.character()
time <- as.numeric()
for(i in 1:length(periodico$entry)){
calc <- as.numeric(difftime(periodico$exit[i], periodico$entry[i], unit="sec"))
time <- append(time,calc)
if (calc < 21){
example.bots <- append(example.bots, as.character(periodico$ID[i]))
}
}
periodico$times <- time
rm(time)
```
Se realiza un ciclo para obtener la diferencia entre los tiempos de acceso y se obtiene un vector con el siguiente tamaÃƒÂ±o y las siguientes transacciones (solo se mostrarÃƒÂ¡n las 6 primeras)
```{r}
length(example.bots)
head(example.bots)
```
El vector anterior es una muestra de los accesos que duran 20 segundos o menos, haciendo alusiÃƒÂ³n a la posible presencia de bots.
### Actividad 1
Modificar su dataset de tal manera que no se lean los identificadores de los artÃƒ­culos como itemN sino
por su tipo de contenido contenido/articuloN. Ejemplo: {item1, item10, item81} es la transacciÃƒÂ³n
{deportes/articulo1, politica/articulo1, opinion/articulo9}.
```{r}
contenido <- c("deportes","politica","variedades","internacional","nacionales","sucesos","comunidad","negocios","opinion")
unliststr <- function(vec){
it <- unlist(strsplit(vec, ","))
numbers <- unique(na.omit(as.numeric(unlist(strsplit(as.character(it), "[^0-9]+")))))
element <- character()
for (i in 1:length(numbers)){
if(floor(((numbers[i]/9) %% 1)*10)!=0){
group <- as.integer((numbers[i]/9)+1)
article <- floor(((numbers[i]/9) %% 1)*10)
article <- paste(c("articulo",article), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}else{
group <- as.integer(numbers[i]/9)
article <- paste(c("articulo",9), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}
}
return(element)
}
periodico$items <- as.character(periodico$items)
periodico$articulos <- sapply(periodico$items, unliststr)
setwd("C:/Users/Davee/Desktop/tarea4/recomendacion-modelos-master")
library("arules")
library("dplyr")
library("arulesViz")
```
Se procede a la lectura de los archivos a utilizar para realizar el analisis exploratorio
```{r}
periodico <- read.csv("periodico.csv")
ejemplo <- read.csv("ejemplo.csv")
```
Para comenzar con el anÃƒÂ¡lisis exploratorio se solicita el nombre de sus columnas para asi determinar si hay alguna que no sirva para el anÃƒÂ¡lisis.
```{r}
names(ejemplo)
names(periodico)
colnames(periodico)[5] <-  "items"
head(ejemplo$X)
```
De primera pasada todas las columnas parecen tener sentido excepto una, 'X', al observar su contenido, parecen Ãƒ­ndices que no tienen mucha utilidad en las actividades. Proceden a eliminarse.
```{r}
ejemplo$X <- NULL
periodico$X <- NULL
```
### Transacciones bot
```{r}
example.bots <- as.character()
time <- as.numeric()
for(i in 1:length(periodico$entry)){
calc <- as.numeric(difftime(periodico$exit[i], periodico$entry[i], unit="sec"))
time <- append(time,calc)
if (calc < 21){
example.bots <- append(example.bots, as.character(periodico$ID[i]))
}
}
periodico$times <- time
rm(time)
```
Se realiza un ciclo para obtener la diferencia entre los tiempos de acceso y se obtiene un vector con el siguiente tamaÃƒÂ±o y las siguientes transacciones (solo se mostrarÃƒÂ¡n las 6 primeras)
```{r}
length(example.bots)
head(example.bots)
```
El vector anterior es una muestra de los accesos que duran 20 segundos o menos, haciendo alusiÃƒÂ³n a la posible presencia de bots.
### Actividad 1
Modificar su dataset de tal manera que no se lean los identificadores de los artÃƒ­culos como itemN sino
por su tipo de contenido contenido/articuloN. Ejemplo: {item1, item10, item81} es la transacciÃƒÂ³n
{deportes/articulo1, politica/articulo1, opinion/articulo9}.
```{r}
contenido <- c("deportes","politica","variedades","internacional","nacionales","sucesos","comunidad","negocios","opinion")
unliststr <- function(vec){
it <- unlist(strsplit(vec, ","))
numbers <- unique(na.omit(as.numeric(unlist(strsplit(as.character(it), "[^0-9]+")))))
element <- character()
for (i in 1:length(numbers)){
if(floor(((numbers[i]/9) %% 1)*10)!=0){
group <- as.integer((numbers[i]/9)+1)
article <- floor(((numbers[i]/9) %% 1)*10)
article <- paste(c("articulo",article), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}else{
group <- as.integer(numbers[i]/9)
article <- paste(c("articulo",9), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}
}
return(element)
}
periodico$items <- as.character(periodico$items)
periodico$articulos <- sapply(periodico$items, unliststr)
summary(periodico)
new$entry <- NULL
new$exit <- NULL
new$times <- NULL
new <- as(new, "transactions")
itemFrequencyPlot(new, topN = 10, "absolute")
sort(itemFrequency(new, "absolute"), decreasing = T)
head(sort(itemFrequency(new, "absolute"), decreasing = T), 10)
rm(new)
library("arules", lib.loc="~/R/R-3.2.4revised/library")
library("arulesViz", lib.loc="~/R/R-3.2.4revised/library")
new <- periodico
new$entry <- NULL
new$exit <- NULL
new$times <- NULL
new <- as(new, "transactions")
itemFrequencyPlot(new, topN = 10, "absolute")
sort(itemFrequency(new, "absolute"), decreasing = T)
head(sort(itemFrequency(new, "absolute"), decreasing = T), 10)
rm(new)
new <- periodico
new$entry <- NULL
new$exit <- NULL
new$times <- NULL
new <- as(new, "transactions")
new$articulos <- NULL
new <- as.factor(new)
new$items <- as.factor(new$items)
new <- as(new, "transactions")
periodico <- read.csv("periodico.csv")
ejemplo <- read.csv("ejemplo.csv")
colnames(periodico)[5] <-  "items"
ejemplo$X <- NULL
periodico$X <- NULL
example.bots <- as.character()
time <- as.numeric()
for(i in 1:length(periodico$entry)){
calc <- as.numeric(difftime(periodico$exit[i], periodico$entry[i], unit="sec"))
time <- append(time,calc)
if (calc < 21){
example.bots <- append(example.bots, as.character(periodico$ID[i]))
}
}
periodico$times <- time
rm(time)
contenido <- c("deportes","politica","variedades","internacional","nacionales","sucesos","comunidad","negocios","opinion")
unliststr <- function(vec){
it <- unlist(strsplit(vec, ","))
numbers <- unique(na.omit(as.numeric(unlist(strsplit(as.character(it), "[^0-9]+")))))
element <- character()
for (i in 1:length(numbers)){
if(floor(((numbers[i]/9) %% 1)*10)!=0){
group <- as.integer((numbers[i]/9)+1)
article <- floor(((numbers[i]/9) %% 1)*10)
article <- paste(c("articulo",article), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}else{
group <- as.integer(numbers[i]/9)
article <- paste(c("articulo",9), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}
}
return(element)
}
#periodico$items <- as.character(periodico$items)
periodico$articulos <- sapply(as.character(periodico$items), unliststr)
periodico$articulos[1]
items <- as.character(periodico$items)
library("arules")
library("dplyr")
library("arulesViz")
periodico <- read.csv("periodico.csv")
ejemplo <- read.csv("ejemplo.csv")
colnames(periodico)[5] <-  "items"
ejemplo$X <- NULL
periodico$X <- NULL
example.bots <- as.character()
time <- as.numeric()
for(i in 1:length(periodico$entry)){
calc <- as.numeric(difftime(periodico$exit[i], periodico$entry[i], unit="sec"))
time <- append(time,calc)
if (calc < 21){
example.bots <- append(example.bots, as.character(periodico$ID[i]))
}
}
periodico$times <- time
rm(time)
contenido <- c("deportes","politica","variedades","internacional","nacionales","sucesos","comunidad","negocios","opinion")
unliststr <- function(vec){
it <- unlist(strsplit(vec, ","))
numbers <- unique(na.omit(as.numeric(unlist(strsplit(as.character(it), "[^0-9]+")))))
element <- character()
for (i in 1:length(numbers)){
if(floor(((numbers[i]/9) %% 1)*10)!=0){
group <- as.integer((numbers[i]/9)+1)
article <- floor(((numbers[i]/9) %% 1)*10)
article <- paste(c("articulo",article), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}else{
group <- as.integer(numbers[i]/9)
article <- paste(c("articulo",9), collapse = "")
item <- paste(c(contenido[group],article), collapse = "/")
element <- paste(c(element,item), collapse = ",")
}
}
return(element)
}
periodico$articulos <- sapply(as.character(periodico$items), unliststr)
